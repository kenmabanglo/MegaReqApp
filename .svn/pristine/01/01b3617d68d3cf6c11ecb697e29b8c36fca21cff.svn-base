<form [formGroup]="form">
  <!-- column fields -->
  <div class="flex-auto">
    <mat-form-field>
      <mat-label>Username</mat-label>
      <input matInput formControlName="userName" readonly="" [disabled]="isSaving">
      <button mat-icon-button class="search-inline-field" color="primary" (click)="openSearch('userName',$event)">
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Branch</mat-label>
      <input matInput formControlName="branchCode" [disabled]="isSaving">
    </mat-form-field>
    <mat-form-field>
      <mat-label>Position Name</mat-label>
      <input matInput formControlName="positionName" [disabled]="isSaving">
    </mat-form-field>
    <mat-form-field>
      <mat-label>Approver Name</mat-label>
      <input matInput formControlName="approverUserName" required readonly [disabled]="isSaving">
      <button mat-icon-button class="search-inline-field" color="primary" (click)="openSearch('approverUserName',$event)">
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
  </div>
  <!-- Ken - 6/19/2024 -->
  <!-- Show List of Current User Approver, if applicable -->
  <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="10px">
    <ng-container *ngIf="form.get('userName').value; else selectUser">
      <ng-container *ngIf="currentApprovers && currentApprovers.length > 0; else noApprovers">
        <ng-container *ngFor="let approver of currentApprovers">
          <div fxLayout="column" fxLayoutAlign="start center" class="approver-wrapper">
            <mat-card *ngIf="approver" class="approver-card">
              <!--<mat-chip class="approver-card-badge">Current</mat-chip>-->
              <span class="badge badge-pill badge-success">Current Approver</span>
              <mat-card-title>{{ approver?.approverFullName }}</mat-card-title>
              <mat-card-subtitle>
                {{ approver?.approverBranchCode }} > {{ approver?.approverPositionName }}
                <br /> <small>Added by {{ approver?.userAddFullName }}</small>
              </mat-card-subtitle> 
            </mat-card>
            <div fxFlex="none" class="fab-container">
              <button mat-fab color="warn" aria-label="Delete Approver" matTooltip="Delete" (click)="deleteApprover(approver?.tranId, approver?.approverFullName)">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </div>
        </ng-container>
      </ng-container>
    </ng-container>
  </div>
  <ng-template #selectUser>
    <div fxLayout="row" fxLayoutAlign="center center">
      <mat-card class="approver-card">
        <mat-card-content>
          <p>Please select a user to view its approver/s.</p>
        </mat-card-content>
      </mat-card>
    </div>
  </ng-template>
  <ng-template #noApprovers>
    <div fxLayout="row" fxLayoutAlign="center center">
      <mat-card class="approver-card">
        <mat-card-content>
          <p>There is currently no approver assigned to this user.</p>
        </mat-card-content>
      </mat-card>
    </div>
  </ng-template>
  <br />
  <!-- -->
  <div align="end">
    <button mat-flat-button color="primary" (click)="saveApprover()" [disabled]="isSaving">
      <mat-icon>save</mat-icon> Save Approver
    </button>
    <button mat-flat-button color="warn" (click)="cancel()">
      <mat-icon>cancel</mat-icon> Cancel
    </button>
  </div>
</form>
